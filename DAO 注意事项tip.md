1.dao的错误一定要在sql执行后抛出的错误中处理。不要妄想用什么检查动作能使sql语句执行一定不会抛出某些错误（比如get检查后再insert，以为这样就不会出现unique冲突错误），因为你检查时的数据库和你动作时的数据库已经不是同一个数据库了（人不能两次踏入相同的河）。




2.从controller到dao，不要出现先get再update整个行的代码。
这种代码是扛不住高并发访问的。
试想一下：假设操作A和B并发对同一个行做先get再update操作
首先两个get同时get，得到原始数据。
如果这个get动作是在同时发生，那么它们各自得到的都是没有对方的空行
假设A先动手， update这一行，把A加进去，B后动手， update这一行，把B加进去，就会把A覆盖。因为它们get的时候，都不知晓对方的存在。而所有的操作都是覆盖性操作。所以一旦面临高并发，就一定会因为相互覆盖对数据。

整改建议：慎用整个对象的update！慎用整个对象的update！慎用整个对象的update！除非你想做一个清场性质的事。否则，如果只是想更新一个字段，请务必只更新那个字段！！！
如果你更新一个对象时，不得不事先做get动作，那么说明这个持久化类的声明不合理！！请对这个类进行拆表！

