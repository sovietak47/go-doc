# goalng 多线程编程 tips

## 1.多线程编程中的通用问题
### 1.1变量
    多线程程序运行时的,程序中的变量可被粗略的归类为两类:全局变量,线程内变量.
    全局变量
    一般是在主线程内声明的.该类变量最大的问题在于有被多个线程并发访问的风险.如果该类变量有被多个线程并发访问的风险或者需求,则该类变量必须做到"线程安全".
    "线程安全"要求多个线程对同一个变量并发访问的结果能保证数据一致性,一般是通过加读写互斥锁的方式实现的.此外还有一个注意点:该类变量(对象)一般应该是无状态的,如果是有状态的,则该状态必须是表征该变量的,全局可见的状态.同时,访问此变量(对象)的线程也一定要讲其视为无状态服务的方式予以使用,即,此类变量不会,也不应记忆"上一次操作"操作;上一秒访问得到的结果,并不意味着下一秒它还是这个结果.
  
    同理,如果在线程中,有文件等共享资源的访问时,也遵循以上规律.事实上,所有资源(不光是变量),如果会被多个线程访问,都会遇到同样的挑战.多线程下的全局变量问题,实质上就是公共资源问题.
  
    线程内变量
    一般是在非主线程内声明的.该类变量最大的问题在于对其他线程而言不可见.这其实是好事.
  
  

### 1.2
